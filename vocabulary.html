<!DOCTYPE html>

<Content-Type: text/html; charset=utf-8>
<html>
<title>Vocabulary training</title>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
<script>
var vocabularySetFull = [
  ["sun", "http://www.webweaver.nu/clipart/img/nature/planets/sun-wearing-sunglasses.png"],
  ["jump", "http://cdni.wired.co.uk/620x413/g_j/jump.jpg"],
  ["tummy", "http://thepropertymarket.co.nz/wp-content/uploads/2015/01/bellybutton.jpg"]
];

var questionNumber = 1;
var currentItem;
var vocabularySet;

function getNextQuestion() {
	if (vocabularySet.length > 0) {
		var randomNum = Math.floor(Math.random() * vocabularySet.length);
		currentItem = vocabularySet[randomNum];
		var imagePath = currentItem[1];
		$("#image").attr('src', imagePath);
		$("#checkAnswerButton").show();
		$("#nextQuestion").hide();
		$("#feedback").empty();
		$("#correctAnswer").empty();
		$("#answer").val("");
		$("#answer").show();
		$("#headline").html("What can you see on the picture below? [Question " + questionNumber + " of " + vocabularySetFull.length + "]")
		//$("#debug").html(correctAnswer);
	} else {
	$("#congratulations").show();
	$("#quiz").hide();
	}
};

function checkAnswer() {
    var givenAnswer, text;

    // Get the value of the input field with id="answer"
    givenAnswer = document.getElementById("answer").value;

    if (givenAnswer == currentItem[0]) {
        text = 'Correct!';
		$("#feedback").css('color','green');
		$("#nextQuestion").show();
		var index = vocabularySet.indexOf(currentItem);
		//$("#debug").html(index);
		if (index > -1) {
			vocabularySet.splice(index, 1);
		}
    } else {
        text = 'Ops... Try again!';
		$("#feedback").css('color','red');
		$("#nextQuestion").hide();
    }
    $("#feedback").html(text);
};

function showAnswer() {
    $("#correctAnswer").html(currentItem[0]);
	$("#correctAnswer").show();
	$("#answer").hide();
	$("#nextQuestion").show();
	$("#checkAnswerButton").hide();
};

function startOver() {
	vocabularySet = vocabularySetFull;
	$("#debug").html(vocabularySet);
	$("#congratulations").hide();
	getNextQuestion();
};

$(document).keypress(function(e) {
    if(e.which == 13) {
		if ($("#feedback").html() == 'Correct!') {
			getNextQuestion()
		} else {
			checkAnswer();
		}
    }
});

$(document).ready(function() {
	vocabularySet = vocabularySetFull;
	$("#congratulations").hide();
	getNextQuestion();
});
</script>
</head>
<body class="body">
<div id="quiz">
	<p id="headline" style="font-size: 2em"></p>
	<input id="answer" type="text">
	<button id="checkAnswerButton" onclick="checkAnswer()">Check!</button>
	<button id="showAnswer" onclick="showAnswer()">Show answer</button>
	<button id="nextQuestion" onclick="getNextQuestion()">Next</button>
	<p id="feedback" style="font-size: 1.875em"></p>
	<p id="correctAnswer" style="font-size: 2em; color: darkgreen"></p>
	<img id="image" src="">
</div>
<p id="debug"></p>
<div id="congratulations" align="center">
<p id="headline" style="font-size: 5em; color: blue">Congratulations !!!</p>
<img id="image" src="http://media.giphy.com/media/BQAk13taTaKYw/giphy.gif"><br>
<button onclick="startOver()">One more time!</button>
</div>
</body>
